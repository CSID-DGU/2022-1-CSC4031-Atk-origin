name: atk-action

on: 
  workflow_dispatch:

jobs: 
  build: 
    runs-on: ubuntu-18.04
    env:
      working-directory: ./server/stt-service
      resource_path: ./server/stt-service/src/main/resources/application.yaml

    steps: 
      - name: Checkout 
        uses: actions/checkout@v2 

      - name: Set up JDK 11
        uses: actions/setup-java@v1 
        with: 
          java-version: 11 

      - name: Grant execute permission for gradlew 
        run: chmod +x gradlew
        working-directory: ${{ env.working-directory }}
        shell: bash 

      - name: Build with Gradle 
        run: ./gradlew build --debug
        working-directory: ${{ env.working-directory }}
        shell: bash # 다음 단계에서 스크립트 추가 예정
        env:
          rds.url: ${{ secrets.RDS_URL }}
          rds.username: ${{ secrets.RDS_USERNAME }}
          rds.password: ${{ secrets.RDS_PASSWORD }}
